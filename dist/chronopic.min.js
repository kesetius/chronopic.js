!function(){function e(e,t){return Array.prototype.slice.call((t||document).querySelectorAll(e))}function t(){for(var e in arguments)if("object"!=typeof(e=arguments[e])||!e)return!1;return!0}function n(){for(var e in arguments)if("number"!=typeof(e=arguments[e])||isNaN(e)||Math.abs(e)>=1/0)return!1;return!0}function a(e,n){t(e)||(e={});for(var a in n)e.hasOwnProperty(a)||(e[a]=n[a]);return e}function r(e){var t={attribs:{},classes:[]};return e.match(/(\[[^\]]+\]|#[^#.\[]+|\.[^#.\[]+|\w+)/g).forEach(function(e){switch(e[0]){case"[":var n=e.match(/^\[([^=\]]+)=?([^\]]+)?\]$/);t.attribs[n[1]]=n[2]||"";break;case".":t.classes.push(e.substr(1));break;case"#":t.id=e.substr(1);break;default:t.tag=e}}),t}function o(e,t){t=a(t,{appendTo:null,context:document,format:"YYYY-MM-DDDD",html:"",insertAfter:null,insertBefore:null,replace:null});var n,o,i=r(e);o=this.domElement=t.context.createElement(i.tag),this.parent=null,i.classes.forEach(function(e){o.classList.add(e)});for(n in i.attribs)i.attribs.hasOwnProperty(n)&&o.setAttribute(n,i.attribs[n]);o.innerHTML=t.html,t.replace?t.replace.parentNode.replaceChild(o,t.replace):t.appendTo?(this.parent=t.appendTo).domElement.appendChild(o):t.insertAfter?t.insertAfter.parentNode.insertBefore(o,t.insertAfter.nextSibling):t.insertBefore&&t.insertBefore.parentNode.insertBefore(o,t.insertBefore)}function i(e){return{compare:function(t){var n,a=0,r=["getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds"];for(n in r){if(e[r[n]]()!=t[r[n]]())break;a=++n}return a},get days(){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},get firstDay(){return new Date(e.getFullYear(),e.getMonth(),1).getDay()},get week(){var t=new Date(e);return t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7)),Math.ceil(((t-new Date(t.getFullYear(),0,1))/864e5+1)/7)}}}function l(e,t){return new o(e,t)}function c(e,t,n){var a=e.getDate(),r=e.getMonth(),o=e.getFullYear(),l=e.getHours(),c=e.getMinutes(),s=e.getSeconds(),h=i(e).week,d=e.getDay(),u=12>l?"㏂":"㏘";return t.replace(/{ww}/gi,("0"+h).slice(-2)).replace(/{w}/gi,h).replace(/{DDDD}/g,n.dayOfWeek[d]).replace(/{DDD}/g,n.dayOfWeekShort[d]).replace(/{DD}/g,("0"+a).slice(-2)).replace(/{D}/g,a).replace(/{MMMM}/g,n.monthName[r]).replace(/{MMM}/g,n.monthNameShort[r]).replace(/{MM}/g,("0"+(r+1)).slice(-2)).replace(/{M}/g,r+1).replace(/{YYYY}/g,o).replace(/{YY}/g,o.toString().slice(-2)).replace(/{HH}/g,("0"+l).slice(-2)).replace(/{H}/g,l).replace(/{hh}/g,("0"+l%12).slice(-2)).replace(/{h}/g,l%12).replace(/{mm}/g,("0"+c).slice(-2)).replace(/{m}/g,c).replace(/{ss}/g,("0"+s).slice(-2)).replace(/{s}/g,s).replace(/{ap}/g,u)}function s(e,t){var n,a,r=i(new Date(e,t)).firstDay||7,o=new Date(e,t,1-(r-1||7)),l=[];for(n=0;6>n;++n)for(l.push([]),a=0;7>a;++a)l[n].push(new Date(o)),o.setDate(o.getDate()+1);return l}function h(e){var t,n,a=[];for(t=0;3>t;++t)for(a.push([]),n=0;4>n;++n)a[t].push(new Date(e,4*t+n));return a}function d(r,o){function u(e,t,a){for(var r,o=f.min,l=f.max;a>(r=i(new Date(e,t,a)).days);)++t,a-=a-r;for(;t>12;)++e,t-=12;if(n(e)){if(n(o.year)&&e<o.year||n(l.year)&&e>l.year)return!1;if(n(t)){if(n(o.month)&&t<o.month&&e<=o.year||n(l.month)&&t>l.month&&e>=l.year)return!1;if(n(a)&&(n(o.day)&&a<o.day&&t<=o.month&&e<=o.year||n(l.day)&&a>l.day&&t>=l.month&&e>=l.year))return!1}}return!0}o=a(o,{className:"chronopic",date:null,format:null,locale:"en_GB",max:{year:9999},min:{year:0},onChange:null}),this.instances=[],this.i18n=d.i18n.en_GB,this.max=t(o.max)?o.max:{},this.min=t(o.min)?o.min:{};var f=this,m=new Date;m.setDate(1),t(o.date)&&(m=(m=o.date)instanceof Date?new Date(m):new Date(m.year,m.month-1,m.day)),("string"==typeof r?e(r):[r]).forEach(function(e){if(e instanceof HTMLElement){var n=e.nextSibling;"DIV"==n.tagName&&n.classList.contains(o.className)||(n=null);var a,r=o.className,d=l("div."+r,{insertAfter:e,replace:n}),f=this,p={};["day","month"].forEach(function(e){d.add(p[e]=l("table.hidden."+e)),p[e].head=l("thead",{appendTo:p[e]}),p[e].body=l("tbody",{appendTo:p[e]})}),f.instances.push(a={date:new Date(m),container:d,element:e,selected:{},tables:p,visible:!1,get day(){return this.date.getDate()},set day(t){u(this.date.getFullYear(),this.date.getMonth()+1,t)&&(this.date.setDate(t),this.selected.day=new Date(this.date),this.element.value=o.format?c(this.date,o.format,f.i18n):this.date.toDateString(),this.hide(),"function"==typeof o.onChange&&o.onChange(e,this.date))},hide:function(){for(var e in p)p[e].classes.add("hidden");this.selected.day?(this.date=new Date(this.selected.day),this.selected.month=new Date(this.date)):this.selected.month=null,this.visible=!1},get month(){return this.date.getMonth()},set month(e){u(this.date.getFullYear(),e+1)&&(this.date.setMonth(e),this.selected.month=new Date(this.date),this.show("day"))},rebuild:function(e){var t,n,a=this,r=a.selected,o=new Date,d=1;if(!e||"day"==e){for(a.tables.day.head.add([l("tr.title").add([l("th.prev[title="+f.locale.prevMonth+"]",{html:"&lt;"}).on("click",function(e){a.month--,e.stopPropagation()}),l("th[colspan=6][title="+f.locale.selectMonth+"]",{html:c(a.date,f.locale.formatMonth,f.locale)}).on("click",function(){a.show("month")}),l("th.next[title="+f.locale.nextMonth+"]",{html:"&gt;"}).on("click",function(e){a.month++,e.stopPropagation()})]),t=l("tr.labels").add(l("th.week",{html:f.locale.week}))],!0),n=0;7>n;++n)t.add(l("th.day[title="+f.locale.dayOfWeek[d%7]+"]",{html:f.locale.dayOfWeekShort[d++%7]}));a.tables.day.body.clear(),s(a.year,a.month).forEach(function(e){var t=l("tr",{appendTo:a.tables.day.body});t.add(l("td.week",{html:i(e[0]).week})),e.forEach(function(e){var n,s=".day",h=e.getMonth()-a.month,d=!u(e.getFullYear(),e.getMonth()+1,e.getDate());(-1==h||11==h)&&(s+=".prev"),(1==h||-11==h)&&(s+=".next"),r.day&&i(r.day).compare(e)>=3&&(s+=".selected"),d&&(s+=".disabled"),i(e).compare(o)>=3&&(s+=".now"),t.add(n=l("td[title="+c(e,f.locale.formatDay,f.locale)+"]"+s,{html:e.getDate()})),!d&&n.on("click",function(){a.month=e.getMonth(),a.day=e.getDate()})})})}return e&&"month"!=e||(a.tables.month.head.add([l("tr.title").add([l("th.prev[title="+f.locale.prevYear+"]",{html:"&lt;"}).on("click",function(e){a.year--,e.stopPropagation()}),l("th.year[colspan=6][title="+f.locale.year+"]").add(l("input[type=number][step=1][min="+(f.min.year||0)+"][max="+(f.max.year||9999)+"][value="+a.year+"]").on("change",function(e){a.year=e.target.value})),l("th.next[title="+f.locale.nextYear+"]",{html:"&gt;"}).on("click",function(e){a.year++,e.stopPropagation()})])],!0),a.tables.month.body.clear(),h(a.year).forEach(function(e){var t=l("tr",{appendTo:a.tables.month.body});e.forEach(function(e){var n,c=".month",s=e.getMonth(),h=!u(e.getFullYear(),s+1);r.month&&i(r.month).compare(e)>=2&&(c+=".selected"),h&&(c+=".disabled"),i(e).compare(o)>=2&&(c+=".now"),t.add(n=l("td[colspan=2][title="+f.locale.monthName[s]+"]"+c,{html:f.locale.monthNameShort[s]})),!h&&n.on("click",function(){a.month=s})})})),this},show:function(e){e||(e="day"),this.rebuild(e),this.visible=!0;for(var t in p)p.hasOwnProperty(t)&&p[t].classes[t==e?"remove":"add"]("hidden");var n=this.container.domElement,a=this.element;n.style.top=a.offsetTop+a.offsetHeight+"px",n.style.left=a.offsetLeft+"px",n.offsetWidth<a.offsetWidth&&(n.style.width=a.offsetWidth+"px")},get year(){return this.date.getFullYear()},set year(e){u(e)&&(this.date.setFullYear(e),this.show("month"))}}),t(o.date)&&(a.day=a.date.getDate())||(e.value=""),e.addEventListener("click",function(e){a[a.visible?"hide":"show"]()}),document.addEventListener("click",function(t){for(var n=t.target;n;){if(n==e||n==d.domElement)return;n=n.parentNode}a.hide()})}},this),this.locale=o.locale}return o.prototype={add:function(e,t){return t===!0&&this.clear(),(e instanceof Array?e:[e]).forEach(function(e){this.domElement.appendChild(e.domElement),e.parent=this},this),this},get classes(){return this.domElement.classList},clear:function(){for(var e,t=this.domElement;e=t.firstChild;)t.removeChild(e);return this},on:function(e,t){return this.domElement.addEventListener(e,t),this}},d.prototype={get locale(){return this.i18n},set locale(e){d.i18n[e]&&d.i18n[e]!==this.i18n&&(this.i18n=d.i18n[e],this.instances.forEach(function(e){e.selected.day&&(e.day=e.date.getDate()),e.rebuild()}))}},d.i18n={en_GB:{dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],disabled:"Disabled",formatDay:"{DDDD} {D}. {MMMM} {YYYY}",formatMonth:"{MMMM} {YYYY}",month:"Month",monthName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNameShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],nextMonth:"Next month",nextYear:"Next year",prevMonth:"Previous month",prevYear:"Previous year",selectMonth:"Select month",week:"Week",year:"Year"}},"undefined"!=typeof window&&(window.Chronopic=d),"object"==typeof module&&module.exports&&(module.exports=d),d}();