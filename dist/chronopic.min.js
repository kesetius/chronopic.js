!function(){function e(e){return"object"==typeof e&&e}function t(e){return"number"==typeof e&&!isNaN(e)&&Math.abs(e)<1/0}function a(t,a){e(t)||(t={});for(var n in a)t.hasOwnProperty(n)||(t[n]=a[n]);return t}function n(e,t){t=a(t,{appendTo:null,context:document,html:"",insertAfter:null,insertBefore:null,replace:null});var n,r=function(e){var t={attribs:{},classes:[]};return e.match(/(\[[^\]]+\]|#[^#.\[]+|\.[^#.\[]+|\w+)/g).forEach(function(e){switch(e[0]){case"[":var a=e.match(/^\[([^=\]]+)=?([^\]]+)?\]$/);t.attribs[a[1]]=a[2]||"";break;case".":t.classes.push(e.substr(1));break;case"#":t.id=e.substr(1);break;default:t.tag=e}}),t}(e),o=t.context.createElement(r.tag);(this.element=o).innerHTML=t.html,this.parent=null,r.classes.forEach(function(e){o.classList.add(e)});for(n in r.attribs)r.attribs.hasOwnProperty(n)&&o.setAttribute(n,r.attribs[n]);t.replace?t.replace.parentNode.replaceChild(o,t.replace):t.appendTo?(this.parent=t.appendTo).element.appendChild(o):t.insertAfter?t.insertAfter.parentNode.insertBefore(o,t.insertAfter.nextSibling):t.insertBefore&&t.insertBefore.parentNode.insertBefore(o,t.insertBefore)}function r(e){return{compare:function(t){var a,n=0,r=["getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds"];for(a in r){if(e[r[a]]()!=t[r[a]]())break;n=++a}return n},get days(){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},get firstDay(){return new Date(e.getFullYear(),e.getMonth(),1).getDay()},get week(){var t=new Date(e);return t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7)),Math.ceil(((t-new Date(t.getFullYear(),0,1))/864e5+1)/7)}}}function o(e,t){return new n(e,t)}function i(e,t,a){var n=e.getDate(),o=e.getMonth(),i=e.getFullYear(),l=e.getHours(),c=e.getMinutes(),s=e.getSeconds(),h=r(e).week,d=e.getDay(),u=12>l?"㏂":"㏘";return t.replace(/{ww}/gi,("0"+h).slice(-2)).replace(/{w}/gi,h).replace(/{DDDD}/g,a.dayOfWeek[d]).replace(/{DDD}/g,a.dayOfWeekShort[d]).replace(/{DD}/g,("0"+n).slice(-2)).replace(/{D}/g,n).replace(/{MMMM}/g,a.monthName[o]).replace(/{MMM}/g,a.monthNameShort[o]).replace(/{MM}/g,("0"+(o+1)).slice(-2)).replace(/{M}/g,o+1).replace(/{YYYY}/g,i).replace(/{YY}/g,i.toString().slice(-2)).replace(/{HH}/g,("0"+l).slice(-2)).replace(/{H}/g,l).replace(/{hh}/g,("0"+l%12).slice(-2)).replace(/{h}/g,l%12).replace(/{mm}/g,("0"+c).slice(-2)).replace(/{m}/g,c).replace(/{ss}/g,("0"+s).slice(-2)).replace(/{s}/g,s).replace(/{ap}/g,u)}function l(e,t){var a,n,o=r(new Date(e,t)).firstDay||7,i=new Date(e,t,1-(o-1||7)),l=[];for(a=0;6>a;++a)for(l.push([]),n=0;7>n;++n)l[a].push(new Date(i)),i.setDate(i.getDate()+1);return l}function c(e){var t,a,n=[];for(t=0;3>t;++t)for(n.push([]),a=0;4>a;++a)n[t].push(new Date(e,4*t+a));return n}function s(n,h){function d(e,a,n){for(var o,i=u.min,l=u.max;n>(o=r(new Date(e,a,n)).days);)++a,n-=n-o;for(;a>12;)++e,a-=12;if(t(e)){if(t(i.year)&&e<i.year||t(l.year)&&e>l.year)return!1;if(t(a)){if(t(i.month)&&a<i.month&&e<=i.year||t(l.month)&&a>l.month&&e>=l.year)return!1;if(t(n)&&(t(i.day)&&n<i.day&&a<=i.month&&e<=i.year||t(l.day)&&n>l.day&&a>=l.month&&e>=l.year))return!1}}return!0}h=a(h,{className:"chronopic",date:null,format:null,locale:"en_GB",max:{year:9999},min:{year:0},onChange:null}),this.instances=[],this.i18n=s.i18n.en_GB,this.max=e(h.max)?h.max:{},this.min=e(h.min)?h.min:{};var u=this,f=new Date;e(h.date)&&(f=(f=h.date)instanceof Date?new Date(f):new Date(f.year,f.month-1,f.day)),("string"==typeof n?Array.prototype.slice.call(document.querySelectorAll(n)):[n]).forEach(function(a){if(a instanceof HTMLElement){var n=a.nextSibling;"DIV"==n.tagName&&n.classList.contains(h.className)||(n=null);var s,u=h.className,m=o("div."+u,{insertAfter:a,replace:n}),p=this,y={};["day","month"].forEach(function(e){m.add(y[e]=o("table.hidden."+e)),y[e].head=o("thead",{appendTo:y[e]}),y[e].body=o("tbody",{appendTo:y[e]})}),p.instances.push(s={date:new Date(f),container:m,element:a,selected:{},tables:y,visible:!1,get day(){return this.date.getDate()},set day(e){d(this.date.getFullYear(),this.date.getMonth()+1,e)&&(this.date.setDate(e),this.selected.day=new Date(this.date),this.element.value=h.format?i(this.date,h.format,p.i18n):this.date.toDateString(),this.hide(),"function"==typeof h.onChange&&h.onChange(a,this.date))},hide:function(){for(var e in y)y[e].classes.add("hidden");this.visible=!1,this.selected.month=null,this.selected.day&&(this.date=new Date(this.selected.day),this.selected.month=new Date(this.date))},get month(){return this.date.getMonth()},set month(e){d(this.date.getFullYear(),e+1)&&(this.date.setDate(1),this.date.setMonth(e),this.selected.month=new Date(this.date),this.show("day"))},rebuild:function(e){var a,n,s=this,h=s.selected,u=new Date,f=1;if(!e||"day"==e){for(s.tables.day.head.add([o("tr.title").add([o("th.prev[title="+p.locale.prevMonth+"]",{html:"&lt;"}).on("click",function(e){s.month--,e.stopPropagation()}),o("th[colspan=6][title="+p.locale.selectMonth+"]",{html:i(s.date,p.locale.formatMonth,p.locale)}).on("click",function(){s.show("month")}),o("th.next[title="+p.locale.nextMonth+"]",{html:"&gt;"}).on("click",function(e){s.month++,e.stopPropagation()})]),a=o("tr.labels").add(o("th.week",{html:p.locale.week}))],!0),n=0;7>n;++n)a.add(o("th.day[title="+p.locale.dayOfWeek[f%7]+"]",{html:p.locale.dayOfWeekShort[f++%7]}));s.tables.day.body.clear(),l(s.year,s.month).forEach(function(e){var t=o("tr",{appendTo:s.tables.day.body});t.add(o("td.week",{html:r(e[0]).week})),e.forEach(function(e){var a,n=".day",l=e.getMonth()-s.month,c=!d(e.getFullYear(),e.getMonth()+1,e.getDate());(-1==l||11==l)&&(n+=".prev"),(1==l||-11==l)&&(n+=".next"),h.day&&r(h.day).compare(e)>=3&&(n+=".selected"),c&&(n+=".disabled"),r(e).compare(u)>=3&&(n+=".now"),t.add(a=o("td[title="+i(e,p.locale.formatDay,p.locale)+"]"+n,{html:e.getDate()})),!c&&a.on("click",function(){s.month=e.getMonth(),s.day=e.getDate()})})})}return e&&"month"!=e||(s.tables.month.head.add([o("tr.title").add([o("th.prev[title="+p.locale.prevYear+"]",{html:"&lt;"}).on("click",function(e){s.year--,e.stopPropagation()}),o("th.year[colspan=6][title="+p.locale.year+"]").add(o("input[type=number][step=1][min="+(p.min.year||0)+"][max="+(p.max.year||9999)+"][value="+s.year+"]").on("change",function(e,a){console.log(e.target.value),t(a=Number(e.target.value))&&(s.year=a)})),o("th.next[title="+p.locale.nextYear+"]",{html:"&gt;"}).on("click",function(e){s.year++,e.stopPropagation()})])],!0),s.tables.month.body.clear(),c(s.year).forEach(function(e){var t=o("tr",{appendTo:s.tables.month.body});e.forEach(function(e){var a,n=".month",i=e.getMonth(),l=!d(e.getFullYear(),i+1);h.month&&r(h.month).compare(e)>=2&&(n+=".selected"),l&&(n+=".disabled"),r(e).compare(u)>=2&&(n+=".now"),t.add(a=o("td[colspan=2][title="+p.locale.monthName[i]+"]"+n,{html:p.locale.monthNameShort[i]})),!l&&a.on("click",function(){s.month=i})})})),this},show:function(e){e||(e="day"),this.rebuild(e),this.visible=!0;for(var t in y)y.hasOwnProperty(t)&&y[t].classes[t==e?"remove":"add"]("hidden");var a=this.container.element,n=this.element;a.style.top=n.offsetTop+n.offsetHeight+"px",a.style.left=n.offsetLeft+"px",a.offsetWidth<n.offsetWidth&&(a.style.width=n.offsetWidth+"px")},get year(){return this.date.getFullYear()},set year(e){d(e)&&(this.date.setFullYear(e),this.show("month"))}}),e(h.date)&&(s.day=s.date.getDate())||(a.value=""),a.addEventListener("click",function(e){s[s.visible?"hide":"show"]()}),document.addEventListener("click",function(e,t){for(;t=t?t.parentNode:e.target;)if(t==a||t==m.element)return;s.hide()})}},this),this.locale=h.locale}return n.prototype={add:function(e,t){return t===!0&&this.clear(),(e instanceof Array?e:[e]).forEach(function(e){this.element.appendChild(e.element),e.parent=this},this),this},get classes(){return this.element.classList},clear:function(){for(var e,t=this.element;e=t.firstChild;)t.removeChild(e);return this},on:function(e,t){return this.element.addEventListener(e,t),this}},s.prototype={get locale(){return this.i18n},set locale(e){s.i18n[e]&&s.i18n[e]!==this.i18n&&(this.i18n=s.i18n[e],this.instances.forEach(function(e){e.selected.day&&(e.day=e.date.getDate()),e.rebuild()}))}},s.i18n={en_GB:{dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],disabled:"Disabled",formatDay:"{DDDD} {D} {MMMM} {YYYY}",formatMonth:"{MMMM} {YYYY}",month:"Month",monthName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNameShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],nextMonth:"Next month",nextYear:"Next year",prevMonth:"Previous month",prevYear:"Previous year",selectMonth:"Select month",week:"Week",year:"Year"}},"undefined"!=typeof window&&(window.Chronopic=s),"object"==typeof module&&module.exports&&(module.exports=s),s}();