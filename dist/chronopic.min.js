!function(){function e(e,t){return Array.prototype.slice.call((t||document).querySelectorAll(e))}function t(e,t){"object"==typeof e&&e||(e={});for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e}function n(e){var t={attribs:{},classes:[]};return e.match(/(\[[^\]]+\]|#[^#.\[]+|\.[^#.\[]+|\w+)/g).forEach(function(e){switch(e[0]){case"[":var n=e.match(/^\[([^=\]]+)=?([^\]]+)?\]$/);t.attribs[n[1]]=n[2]||"";break;case".":t.classes.push(e.substr(1));break;case"#":t.id=e.substr(1);break;default:t.tag=e}}),t}function a(e,a){a=t(a,{appendTo:null,context:document,format:"YYYY-MM-DDDD",html:"",insertAfter:null,insertBefore:null});var o,r,i=n(e);r=this.domElement=a.context.createElement(i.tag),this.parent=null,i.classes.forEach(function(e){r.classList.add(e)});for(o in i.attribs)i.attribs.hasOwnProperty(o)&&r.setAttribute(o,i.attribs[o]);r.innerHTML=a.html,a.appendTo?(this.parent=a.appendTo).domElement.appendChild(r):a.insertAfter?a.insertAfter.parentNode.insertBefore(r,a.insertAfter.nextSibling):a.insertBefore&&a.insertBefore.parentNode.insertBefore(r,a.insertBefore)}function o(e){return{compare:function(t){var n,a=0,o=["getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds"];for(n in o){if(e[o[n]]()!=t[o[n]]())break;a=++n}return a},get days(){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},get firstDay(){return new Date(e.getFullYear(),e.getMonth(),1).getDay()},get week(){var t=new Date(e);return t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7)),Math.ceil(((t-new Date(t.getFullYear(),0,1))/864e5+1)/7)}}}function r(e,t){return new a(e,t)}function i(e,t,n){var a=e.getDate(),r=e.getMonth(),i=e.getFullYear(),c=e.getHours(),l=e.getMinutes(),s=e.getSeconds(),h=o(e).week,d=e.getDay(),u=12>c?"㏂":"㏘";return t.replace(/{ww}/gi,("0"+h).slice(-2)).replace(/{w}/gi,h).replace(/{DDDD}/g,n.dayOfWeek[d]).replace(/{DDD}/g,n.dayOfWeekShort[d]).replace(/{DD}/g,("0"+a).slice(-2)).replace(/{D}/g,a).replace(/{MMMM}/g,n.monthName[r]).replace(/{MMM}/g,n.monthNameShort[r]).replace(/{MM}/g,("0"+(r+1)).slice(-2)).replace(/{M}/g,r+1).replace(/{YYYY}/g,i).replace(/{YY}/g,i.toString().slice(-2)).replace(/{HH}/g,("0"+c).slice(-2)).replace(/{H}/g,c).replace(/{hh}/g,("0"+c%12).slice(-2)).replace(/{h}/g,c%12).replace(/{mm}/g,("0"+l).slice(-2)).replace(/{m}/g,l).replace(/{ss}/g,("0"+s).slice(-2)).replace(/{s}/g,s).replace(/{ap}/g,u)}function c(e,t){var n,a,r=o(new Date(e,t)).firstDay||7,i=new Date(e,t,1-(r-1||7)),c=[];for(n=0;6>n;++n)for(c.push([]),a=0;7>a;++a)c[n].push(new Date(i)),i.setDate(i.getDate()+1);return c}function l(e){var t,n,a=[];for(t=0;3>t;++t)for(a.push([]),n=0;4>n;++n)a[t].push(new Date(e,4*t+n));return a}function s(n,a){a=t(a,{className:"chronopic",format:null,locale:"en_GB",onChange:null});var h=new Date;this.instances=[],this.i18n=s.i18n.en_GB,("string"==typeof n?e(n):[n]).forEach(function(e){if(e instanceof HTMLElement){var t,n=a.className,s=r("div."+n,{insertAfter:e}),d=this,u={};["day","month"].forEach(function(e){s.add(u[e]=r("table.hidden."+e)),u[e].head=r("thead",{appendTo:u[e]}),u[e].body=r("tbody",{appendTo:u[e]})}),this.instances.push(t={date:new Date(h),container:s,element:e,selected:{},tables:u,visible:!1,get day(){return this.date.getDate()},set day(t){this.date.setDate(t),this.selected.day=new Date(this.date),this.element.value=a.format?i(this.date,a.format,d.i18n):this.date.toDateString(),this.hide(),"function"==typeof a.onChange&&a.onChange(e,this.date)},hide:function(){for(var e in u)u[e].classes.add("hidden");this.selected.day?(this.date=new Date(this.selected.day),this.selected.month=new Date(this.date)):this.selected.month=null,this.visible=!1},get month(){return this.date.getMonth()},set month(e){this.date.setMonth(e),this.selected.month=new Date(this.date),this.show("day")},rebuild:function(e){var t,n,a=this,s=a.selected,h=new Date,u=1;if(!e||"day"==e){for(a.tables.day.head.add([r("tr.title").add([r("th.prev[title="+d.locale.prevMonth+"]",{html:"&lt;"}).on("click",function(e){a.month--,e.stopPropagation()}),r("th[colspan=6][title="+d.locale.selectMonth+"]",{html:i(a.date,d.locale.formatMonth,d.locale)}).on("click",function(){a.show("month")}),r("th.next[title="+d.locale.nextMonth+"]",{html:"&gt;"}).on("click",function(e){a.month++,e.stopPropagation()})]),t=r("tr.labels").add(r("th.week",{html:d.locale.week}))],!0),n=0;7>n;++n)t.add(r("th.day[title="+d.locale.dayOfWeek[u%7]+"]",{html:d.locale.dayOfWeekShort[u++%7]}));a.tables.day.body.clear(),c(a.year,a.month).forEach(function(e){var t=r("tr",{appendTo:a.tables.day.body});t.add(r("td.week",{html:o(e[0]).week})),e.forEach(function(e){var n,c=".day",l=e.getMonth()-a.month;(-1==l||11==l)&&(c+=".prev"),(1==l||-11==l)&&(c+=".next"),s.day&&o(s.day).compare(e)>=3&&(c+=".selected"),o(e).compare(h)>=3&&(c+=".now"),t.add(n=r("td[title="+i(e,d.locale.formatDay,d.locale)+"]"+c,{html:e.getDate()})),n.on("click",function(){a.month=e.getMonth(),a.day=e.getDate()})})})}return e&&"month"!=e||(a.tables.month.head.add([r("tr.title").add([r("th.prev[title="+d.locale.prevYear+"]",{html:"&lt;"}).on("click",function(e){a.year--,e.stopPropagation()}),r("th[colspan=6][title="+d.locale.selectYear+"]",{html:i(a.date,d.locale.formatYear,d.locale)}),r("th.next[title="+d.locale.nextYear+"]",{html:"&gt;"}).on("click",function(e){a.year++,e.stopPropagation()})])],!0),a.tables.month.body.clear(),l(a.year).forEach(function(e){var t=r("tr",{appendTo:a.tables.month.body});e.forEach(function(e){var n,i=".month",c=e.getMonth();s.month&&o(s.month).compare(e)>=2&&(i+=".selected"),o(e).compare(h)>=2&&(i+=".now"),t.add(n=r("td[colspan=2][title="+d.locale.monthName[c]+"]"+i,{html:d.locale.monthNameShort[c]})),n.on("click",function(){a.month=c})})})),this},show:function(e){e||(e="day"),this.rebuild(e),this.visible=!0;for(var t in u)u.hasOwnProperty(t)&&u[t].classes[t==e?"remove":"add"]("hidden")},get year(){return this.date.getFullYear()},set year(e){this.date.setFullYear(e),this.show("month")}}),e.addEventListener("click",function(e){t[t.visible?"hide":"show"](),e.stopPropagation()}),document.addEventListener("click",function(e){for(var n=e.target;n;){if(n==s.domElement)return;n=n.parentNode}t.hide()})}},this),this.locale=a.locale}return a.prototype={add:function(e,t){return t===!0&&this.clear(),(e instanceof Array?e:[e]).forEach(function(e){this.domElement.appendChild(e.domElement),e.parent=this},this),this},get classes(){return this.domElement.classList},clear:function(){for(var e,t=this.domElement;e=t.firstChild;)t.removeChild(e);return this},on:function(e,t){return this.domElement.addEventListener(e,t),this}},s.prototype={get locale(){return this.i18n},set locale(e){s.i18n[e]&&s.i18n[e]!==this.i18n&&(this.i18n=s.i18n[e],this.instances.forEach(function(e){e.selected.day&&(e.day=e.date.getDate()),e.rebuild()}))}},s.i18n={en_GB:{dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],disabled:"Disabled",formatDay:"{DDDD} {D}. {MMMM} {YYYY}",formatMonth:"{MMMM} {YYYY}",formatYear:"{YYYY}",month:"Month",monthName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNameShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],nextMonth:"Next month",nextYear:"Next year",prevMonth:"Previous month",prevYear:"Previous year",selectMonth:"Select month",selectYear:"Select year",week:"Week",year:"Year"}},"undefined"!=typeof window&&(window.Chronopic=s),"object"==typeof module&&module.exports&&(module.exports=s),s}();